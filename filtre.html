<!DOCTYPE html>
<html lang="fr">
  <head>
    <title>INS'Asso</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
    <script src="js/bootstrap/bootstrap.bundle.min.js"></script>
    <script src="js/filtre.js"></script>
    <script src="js/util.js"></script>

    <link rel="stylesheet" href="css/bootstrap/bootstrap.min.css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css" crossorigin="anonymous">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
    <link href="https://fonts.googleapis.com/css?family=Roboto:100,400" rel="stylesheet">
    <link href="css/filtre.css" rel="stylesheet">
    <link href="css/colorcodes.css" rel="stylesheet">
    <link href="css/fontcodes.css" rel="stylesheet">
    <link href="css/stickynavbar.css" rel="stylesheet">


  </head>
  <body>
      <header>
        <nav class="navbar">
            <a class="nav-item nav-link return-link nav-ico" onclick="goBack();"><i class="fas fa-angle-left fa-2x"></i></a>
            <form class="form-inline">
                <button type="button" class="btn btn-round-lg valider"  data-url="" onclick="filter()">Valider</button>
            </form>
        </nav>
      </header>

      <div class="containerList" id="filtrePage">
          <li class="list-group-item con"><span>Favoris</span>
            <span class="badge">
              <div class="checkbox gros">
                <div class="souscheck">
                <input id="favoris" class="check" type="checkbox" checked="true" />
                <label for="favoris"></label>
              </div>
            </span>
          </li>
          <li class="list-group-item" id="parentTest1"><span class="chevron" id="test1">Animation du campus</span>
            <span class="badge">
              <i class="fa fa-chevron-down" id="chevron1" aria-hidden="true"></i>
              <div class="checkbox gros">
                <div class="souscheck">
                <input class="check cocher" id="caseTest1" type="checkbox" />
                <label for="caseTest1"></label>
              </div>
            </span>
          </li>
          <li class="list-group-item" id="parentTest2"><span class="chevron" id="test2">Arts</span>
            <span class="badge">
              <i class="fa fa-chevron-down"id="chevron2" aria-hidden="true"></i>
              <div class="checkbox gros">
                <div class="souscheck">
                <input class="check cocher" id="caseTest2" type="checkbox" checked="true" />
                <label for="caseTest2"></label>
              </div>
            </span>
          </li>
          <li class="list-group-item" id="parentTest3"><span class="chevron" id="test3">Culture</span>
            <span class="badge">
              <i class="fa fa-chevron-down" id="chevron3" aria-hidden="true"></i>
              <div class="checkbox gros">
                <div class="souscheck">
                <input class="check cocher" id="caseTest3" type="checkbox" />
                <label for="caseTest3"></label>
              </div>
            </span>
          </li>
          <li class="list-group-item" id="parentTest9"><span class="chevron" id="test9">DÃ©partement</span>
            <span class="badge">
              <i class="fa fa-chevron-down" id="chevron9" aria-hidden="true"></i>
              <div class="checkbox gros">
                <div class="souscheck">
                <input class="check cocher" id="caseTest9" type="checkbox" />
                <label for="caseTest9"></label>
              </div>
              </div>
            </span>
          </li>
          <li class="list-group-item" id="parentTest4"><span class="chevron" id="test4">Humanitaires et Social</span>
            <span class="badge">
              <i class="fa fa-chevron-down" id="chevron4" aria-hidden="true"></i>
              <div class="checkbox gros">
                <div class="souscheck">
                <input class="check cocher" id="caseTest4" type="checkbox" />
                <label for="caseTest4"></label>
              </div>
            </span>
          </li>
          <li class="list-group-item" id="parentTest5"><span class="chevron" id="test5">Loisir</span>
            <span class="badge">
              <i class="fa fa-chevron-down" id="chevron5" aria-hidden="true"></i>
              <div class="checkbox gros">
                <div class="souscheck">
                <input class="check cocher" id="caseTest5" type="checkbox" />
                <label for="caseTest5"></label>
              </div>
            </span>
          </li>
          <li class="list-group-item" class="chevron" id="parentTest6">
            <span class="chevron" id="test6">Sport</span>
            <span class="badge">
              <i class="fa fa-chevron-down" id="chevron6" aria-hidden="true"></i>
              <div class="checkbox gros">
                <div class="souscheck">
                <input class="check cocher" id="caseTest6" type="checkbox" />
                <label for="caseTest6"></label>
              </div>
            </span>
          </li>
          <li class="list-group-item" id="parentTest7"><span class="chevron" id="test7">Technique et Scientifique
            <span class="badge">
              <i class="fa fa-chevron-down" id="chevron7" aria-hidden="true"></i>
              <div class="checkbox gros">
                <div class="souscheck">
                <input class="check cocher" id="caseTest7" type="checkbox" />
                <label for="caseTest7"></label>
              </div>
            </span>
          </li>
      </div>
  </body>
</html>

<script>

    function filter(){
        var con = findParameter("con");
        var ischecked = false;
        $('.check').each(function(){
		    if(this.checked)
                ischecked = true;
    	});
        if(con === "true"){
            var url = "index.html?filt=false&con=true"+location.hash;
        }else{
            var url = "index.html?filt=false&con=false"+location.hash;
        }
        if(!ischecked){
            window.location.replace(url);
        }
        else{
            window.location.replace($(".valider").attr("data-url"));
        }
    }
  $(document).ready(function() {
    var con = findParameter("con");
    console.log("connected ?" + con);
    if(con === "true"){
      $(".valider").attr("data-url", "index.html?filt=true&con=true"+location.hash);
    }else{
      $(".con").hide();
      $(".valider").attr("data-url", "index.html?filt=true"+location.hash);
  }
  });
</script>
